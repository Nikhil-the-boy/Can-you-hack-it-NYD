<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LinkedUp — Hackathon Marketplace</title>
  <style>
    :root{
      --accent-1:#0a66c2; --accent-2:#2b9cff; --muted:#6b7280; --bg:#f5f8fb;
    }
    *{box-sizing:border-box}
    body{font-family:Inter, 'Segoe UI', Roboto, system-ui; margin:0;background:linear-gradient(180deg,#f7fbff,#f3f7fb);color:#0b2540}
    header{display:flex;align-items:center;justify-content:space-between;padding:14px 22px;background:transparent}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,var(--accent-1),var(--accent-2));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800}
    .title h1{margin:0;font-size:18px}
    .title p{margin:2px 0 0 0;color:var(--muted);font-size:13px}
    .header-right{display:flex;gap:12px;align-items:center}
    .profile-btn{display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:1px solid rgba(10,102,194,0.12);cursor:pointer;background:#fff}
    .profile-avatar{width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,var(--accent-1),var(--accent-2));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    .container{max-width:1150px;margin:18px auto;padding:0 18px}
    .toolbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:12px}
    .search{display:flex;gap:10px;align-items:center;flex:1}
    .search input{flex:1;padding:11px 12px;border-radius:10px;border:1px solid #e9f3ff;background:#fff}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
    .card{background:#fff;padding:14px;border-radius:12px;box-shadow:0 8px 24px rgba(12,35,60,0.04);display:flex;flex-direction:column;gap:8px;border:1px solid #eef6ff}
    .card h3{margin:0;font-size:15px;color:#09203f}
    .meta{font-size:13px;color:var(--muted)}
    .problem{color:#173043;font-size:14px;line-height:1.4;max-height:58px;overflow:hidden}
    .card-footer{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    .btn{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:#fff;padding:8px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .page-nav{display:flex;gap:8px;justify-content:center;margin:18px 0;align-items:center}
    .page-btn{background:#fff;border:1px solid #eaf4ff;padding:8px 10px;border-radius:8px;cursor:pointer}
    .page-btn.active{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:#fff;border:none}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">LU</div>
      <div class="title">
        <h1>LinkedUp — Hackathon Marketplace</h1>
        <p>Discover events • Find teammates • Build together</p>
      </div>
    </div>

    <div class="header-right">
      <div id="userCount" style="color:var(--muted);font-weight:600">Not logged in</div>
      <div id="profileBtn" class="profile-btn" onclick="openProfile()" title="Open Profile">
        <div class="profile-avatar" id="profileAvatar">--</div>
        <div style="display:flex;flex-direction:column;align-items:flex-start">
          <div id="profileName" style="font-weight:700;font-size:13px">Guest</div>
          <div id="profileRole" style="font-size:12px;color:var(--muted)">Not logged</div>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="toolbar">
      <div class="search">
        <input id="globalSearch" placeholder="Search events, theme, domain, or problem..." oninput="filterGrid()" aria-label="Search events">
        <div style="display:flex;gap:8px">
          <select id="count" onchange="regen()" style="padding:10px;border-radius:10px;border:1px solid #e9f6ff;background:#fff">
            <option>1000</option><option>500</option><option>100</option><option>50</option>
          </select>
        </div>
      </div>

      <div style="display:flex;gap:10px;align-items:center">
        <label style="color:var(--muted);font-weight:600">Columns</label>
        <select id="cols" onchange="updateCols()" style="padding:10px;border-radius:10px;border:1px solid #e9f6ff;background:#fff">
          <option>2</option><option>1</option>
        </select>
        <button id="loginBtn" class="btn" onclick="handleLogin()">Login (fetch users from Firebase)</button>
      </div>
    </div>

    <section id="grid" class="grid" aria-live="polite"></section>

    <div id="pagination" class="page-nav" role="navigation" aria-label="Pagination"></div>

    <p style="text-align:center;color:var(--muted);margin-top:8px">Click "Open" to view event details. Search Teams/Teammates use Firebase users after login.</p>
  </main>

  <!-- LOAD firebase.js module first -->
  <script type="module" src="firebase.js"></script>
  <!-- Then app logic -->
  <script src="hackathons.js"></script>
</body>
</html>
